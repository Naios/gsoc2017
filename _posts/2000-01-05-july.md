---
title: "July"
bg: myblacklight
color: mygrey
fa-icon: cloud-upload
---

## Phase II - July

Based on the mapping API which was implemented in phase one, `unwrapped` was reimplemented. Pull request [#2741](https://github.com/STEllAR-GROUP/hpx/issues/2741) contributed the rewritten implementation of `unwrapped` as well as the whole conversion of the HPX codebase.

Due to the requirement, that the new unwrapped should pass none future arguments through, it was considered to split the deferred and the immediate unwrapped into two separated interfaces, since the implementation selection of `unwrapped` would be broken otherwise:

- `unwrap`: Unwraps a variadic pack of futures directly
- `unwrapping`: Creates a callable object that unwraps the futures

Also, multiple versions of `unwrap` and `unwrapping` are provided to unwrap
until a particular future depth of a given pack:

- `unwrap_n` and `unwrapping_n`: Unwraps futures recursively until depth `n`.
- `unwrap_all` and `unwrapping_all`: Unwraps all futures recursively which occur inside the pack.

Currently, the old `unwrapped` function forwards its input to `unwrap` and `unwrapping`,
so we are able to test the behavior of the new implementation.
The next step would be to replace all occurrences of `unwrapped` through
`unwrap` and `unwrapping` accordingly while officially deprecating the `unwrapped` API.

Overall this step took me longer than expected, mainly because the exact behavior
of `unwrapped` was unknown and thus it had to be derived from many unit tests and examples.

Due to the previously named reasons and because a future<T...> is currently considered,
the mapping API was improved recently, to also support 1:n mappings.
